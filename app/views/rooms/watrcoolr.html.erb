<%= render "test/nav" %>

<div class="watrcoolr container">
    <div class="row">
        <div class="col-md-9">
            <h1><%= @room.name %></h1>
            <span>Population: <%= @room.users.length %></span>
            /
            <span>Messages Sent: <%= @room.messages.length %></span>
            <div class="room" id="room-<%= @room.id %>">
              <!-- Contains all past messages -->
              <div id="messages">
                <% @messages.each do |message| %>
                  <p class="chat-msg"><span class="user-msg"><%= message.user.username %>:</span> <%= message.msg_content %></p>
                <% end %>
              </div>

              <!-- Box to input messages -->
              <div id="input-box">
                <%= form_for(@text_message, remote: true, url: '/messages/create', html: { :class => "#{@room.id} chat-text" }) do %>
                  <%= text_field_tag :msg_content %>
                  <%= hidden_field_tag :self_destruct, false %>
                  <%= hidden_field_tag :self_destruct_time, 60 %>
                  <%= hidden_field_tag :self_destruct_type, 'timed' %>
                  <%= hidden_field_tag :room_id, @room.id.to_i %>
                  <%= hidden_field_tag :user_id, @user_id.to_i %>
                  <%= hidden_field_tag :msg_type, 'Text' %>
                  <%= submit_tag "Speak", class: 'submit-text btn btn-default' %>
                <% end %>
              </div>
            </div>
        </div><!-- /.col-md-9 -->
        <div class="current-users col-md-3">
            <h4>Current Users:</h4>
        </div><!-- /.col-md-3 -->
    </div><!-- /.row -->
</div><!-- /.container -->