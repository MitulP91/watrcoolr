<%= render "test/nav" %>
<div class="container">
  <div class="row">
    <div class="col-md-3 col-md-offset-2">
        <h2>Profile</h2>
        <hr>
        <% if user_signed_in? %>
          <h4><%= @user.username %> </h4>
          <p>Number of Rooms: <%= @user.rooms.length %></p>
          <p>Messages Sent: <%= @user.messages.length %></p>
          <p><%= link_to "Settings", controller: "devise/registrations", action: "edit", class: "article"%></p>
        <% end %>
    </div>
    <div class="col-md-3">
      <h2>Rooms</h2>
      <hr>
      <div class="rooms">
        <% if @rooms.length > 0 %>
          <ul id="room-list" class="roomlist list list-unstyled">
            <% @current_user_rooms.each do |room| %>
              <li>
                <h4><%= link_to room.name, room_path(room) %></h4>
                <p>Population: <%= room.users.length %> / Messages Sent: <%= room.messages.length %></p>
              </li>
              <hr>
            <% end %>
          </ul>
        <% else %>
          <ul id="room-list-empty" class="roomlist"> 
            <li>No rooms exist yet. Create one!</li> 
          </ul>
        <% end %>
      </div>
    </div>
    <div class="col-md-3">
      <h2>Tribunals</h2>
      <hr>
      <div class="tribs">
        <% if @user.tribunals.length > 0 %>
          <% @user.tribunals.each do |tribunal| %>
          <h4><%= tribunal.title %></h4>
          <ul id="trib-list" class="triblist list list-unstyled">
            <% if tribunal.applicant_id == @user.id %>
              <ul class="votes-list">
                <li><label for="votes_for">Votes For:</label><%= tribunal.votes_for %></li>
                <li><label for="votes_against">Votes Against:</label><%= tribunal.votes_against %></li>
              </ul>
            <% else %>
              <input type="hidden" name="tribunal_id" value="<%= tribunal.id %>" />
              <button id="vote-for" class="vote-button">FOR</button>
              <button id="vote-against" class="vote-button">AGAINST</button>
            <% end %>
          <% end %>
        </ul>
      <% end %>

      </div>
    </div>
  </div><!-- /.row -->
</div><!-- /.container -->


